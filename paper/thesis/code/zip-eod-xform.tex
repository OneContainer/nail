\begin{Verbatim}[commandchars=\\\{\},codes={\catcode`\$=3\catcode`\^=7\catcode`\_=8}]
\PY{k+kt}{int} \PY{n+nf}{zip\PYZus{}end\PYZus{}of\PYZus{}directory\PYZus{}parse}\PY{p}{(}
  \PY{n}{NailArena} \PY{o}{*}\PY{n}{tmp}\PY{p}{,} \PY{n}{NailStream} \PY{o}{*}\PY{n}{out\PYZus{}files}\PY{p}{,}
  \PY{n}{NailStream} \PY{o}{*}\PY{n}{out\PYZus{}dir}\PY{p}{,} \PY{n}{NailStream} \PY{o}{*}\PY{n}{in\PYZus{}current}\PY{p}{)}\PY{p}{;}
\PY{k+kt}{int} \PY{n+nf}{zip\PYZus{}end\PYZus{}of\PYZus{}directory\PYZus{}generate}\PY{p}{(}
  \PY{n}{NailArena} \PY{o}{*}\PY{n}{tmp}\PY{p}{,} \PY{n}{NailStream} \PY{o}{*}\PY{n}{in\PYZus{}files}\PY{p}{,}
  \PY{n}{NailStream} \PY{o}{*}\PY{n}{in\PYZus{}dir}\PY{p}{,} \PY{n}{NailStream} \PY{o}{*}\PY{n}{out\PYZus{}current}\PY{p}{)}\PY{p}{;}
\end{Verbatim}
